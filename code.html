<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Little Game for You</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the romantic theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* Soft pink background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }
        .game-board {
            box-shadow: 0 10px 30px rgba(224, 110, 160, 0.3); /* Pink shadow */
        }
        .tile {
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            transform-style: preserve-3d;
            perspective: 1000px;
        }
        .tile-content {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 1.5rem;
            background-color: #d1fae5; /* Light mint green */
            border: 3px solid #6ee7b7; /* Subtle green border */
            transform: rotateY(0deg);
            transition: transform 0.6s;
            backface-visibility: hidden;
            position: relative;
        }
        .found .tile-content {
            transform: rotateY(180deg);
            background-color: #fbcfe8; /* Light pink when found */
            border-color: #f472b6;
        }

        /* The hidden heart (backside of the tulip tile) */
        .tile-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 1.5rem;
            background-color: #fbcfe8;
            display: flex;
            justify-content: center;
            align-items: center;
            transform: rotateY(-180deg);
            backface-visibility: hidden;
        }
        .proposal-overlay {
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            pointer-events: none;
        }
        .proposal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
    </style>
</head>
<body>

    <!-- Main Game Container -->
    <div id="app" class="max-w-md w-full bg-white p-6 rounded-3xl game-board text-center">
        
        <!-- UPDATED HEADING -->
        <h1 class="text-3xl font-bold text-pink-500 mb-2">Find the Tulips</h1>
        <p class="text-gray-600 mb-6">Click on the tiles to find all the hidden flowers.</p>

        <div id="status" class="text-xl font-semibold mb-6 text-pink-600">
            Tulips Found: <span id="tulip-count">0</span> / 5
        </div>

        <!-- Game Grid (3x3) -->
        <div id="game-grid" class="grid grid-cols-3 gap-3 md:gap-4 p-2 bg-pink-100 rounded-2xl">
            <!-- Tiles will be injected here by JavaScript -->
        </div>

    </div>

    <!-- Proposal Overlay (Hidden until game completion) -->
    <div id="proposal-overlay" class="proposal-overlay fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 backdrop-blur-sm z-50">
        <div class="bg-white p-10 rounded-3xl shadow-2xl max-w-lg w-11/12 text-center transform scale-95 md:scale-100 transition-transform duration-500">
            <p class="text-6xl mb-6 animate-pulse">üíç</p>
            <h2 class="text-4xl md:text-5xl font-extrabold text-pink-700 leading-tight">
                My Love,
            </h2>
            <p class="text-2xl text-gray-700 my-8">
                You've found all the flowers. Now, for the real question...
            </p>
            <div class="text-6xl font-black text-red-500 bg-pink-200 p-4 rounded-xl inline-block shadow-lg proposal-text">
                Will you marry me?
            </div>
            <p class="text-lg mt-4 text-gray-500">
                (This game can't give you the ring, but I can! ‚ù§Ô∏è)
            </p>
        </div>
    </div>

    <script type="text/javascript">
        // Constants and State
        const TOTAL_TILES = 9;
        const TOTAL_TULIPS = 5;
        let tulipsFound = 0;
        let gameActive = true;
        const TULIP_INDICES = []; // Will store the indices (0-8) of the tulip tiles

        const gameGrid = document.getElementById('game-grid');
        const tulipCountSpan = document.getElementById('tulip-count');
        const proposalOverlay = document.getElementById('proposal-overlay');

        /**
         * Generates the Tulip Emoji HTML structure.
         * @returns {string} The HTML span containing the tulip emoji.
         */
        function getTulipSVG() {
            // Using a large font size to make the emoji prominent
            return `<span class="text-5xl md:text-6xl" role="img" aria-label="Tulip Flower">üå∑</span>`;
        }
        
        /**
         * Generates a Heart SVG structure (used as the 'found' indicator).
         * @returns {string} The Heart SVG string.
         */
        function getHeartSVG() {
            return `
                <svg class="w-12 h-12 text-red-500" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
                </svg>
            `;
        }

        /**
         * Initializes the game board, setting up tiles and hidden tulips.
         */
        function initializeGame() {
            // 1. Determine which tiles will be tulips (random selection)
            while (TULIP_INDICES.length < TOTAL_TULIPS) {
                const randomIndex = Math.floor(Math.random() * TOTAL_TILES);
                if (!TULIP_INDICES.includes(randomIndex)) {
                    TULIP_INDICES.push(randomIndex);
                }
            }
            
            // 2. Build the grid
            for (let i = 0; i < TOTAL_TILES; i++) {
                const isTulip = TULIP_INDICES.includes(i);
                
                const tile = document.createElement('div');
                tile.className = 'tile aspect-square';
                tile.setAttribute('data-index', i);
                
                // Add the tulip content (front face)
                const tileContent = document.createElement('div');
                tileContent.className = 'tile-content p-4';
                // If it's a tulip tile, use the üå∑ emoji; otherwise use the grass emoji üåø
                tileContent.innerHTML = isTulip ? getTulipSVG() : '<p class="text-4xl text-gray-500">üåø</p>';

                // Add the heart content (back face)
                const tileBack = document.createElement('div');
                tileBack.className = 'tile-back';
                tileBack.innerHTML = isTulip ? getHeartSVG() : '<p class="text-4xl text-gray-500">‚ùå</p>'; // X for wrong guess

                tile.appendChild(tileContent);
                tile.appendChild(tileBack);

                // Attach click listener
                tile.addEventListener('click', () => handleTileClick(tile, isTulip));
                gameGrid.appendChild(tile);
            }
        }

        /**
         * Handles the click event on a game tile.
         * @param {HTMLElement} tile The clicked tile element.
         * @param {boolean} isTulip True if the tile contains a hidden tulip.
         */
        function handleTileClick(tile, isTulip) {
            if (!gameActive || tile.classList.contains('found')) return;

            tile.classList.add('found'); // Triggers the flip animation

            if (isTulip) {
                // Found a tulip!
                tulipsFound++;
                tulipCountSpan.textContent = tulipsFound;
                
                // Check if all are found
                if (tulipsFound === TOTAL_TULIPS) {
                    setTimeout(showProposal, 1000); // Wait for the last flip animation to finish
                }
            } else {
                // Wrong tile - the X is shown on the back side (tile-back)
                setTimeout(() => {
                    // Optionally could flip it back, but leaving it flipped indicates it's 'used'
                }, 800); 
            }
        }

        /**
         * Displays the final proposal message.
         */
        function showProposal() {
            gameActive = false;
            proposalOverlay.classList.add('active');
            
            // Optional: Add vibration for extra effect (mobile touch)
            if ('vibrate' in navigator) {
                navigator.vibrate([200, 100, 200, 100, 500]);
            }
        }

        // Start the game when the window loads
        window.onload = initializeGame;
    </script>
</body>
</html>
